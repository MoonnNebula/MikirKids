<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>One in a Million - Chorus Sync</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      color: #fff;
      font-family: "Poppins", sans-serif;
      padding: 24px;
      background: radial-gradient(#0f172a, #020617);
      overflow: hidden;
    }
    /* Video background */
    .bg-video {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -2;
      filter: saturate(1.1) brightness(0.9);
    }
    /* Overlay gelap tipis biar teks kebaca */
    .overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 50% 40%, rgba(0,0,0,0.25), rgba(0,0,0,0.6));
      z-index: -1;
      pointer-events: none;
    }
    .card {
      text-align: center;
      max-width: 720px;
      width: 100%;
    }
    h1 {
      margin-bottom: 16px;
      font-size: 28px;
      letter-spacing: 1px;
    }
    .lyric {
      font-size: clamp(28px, 4vw, 44px);
      letter-spacing: 2px;
      animation: glow 4s ease-in-out infinite; /* hilangkan efek naik-turun */
      min-height: 140px;
      display: block;
      padding: 12px;
      text-align: center;
      white-space: pre-wrap;
      opacity: 1;
      transition: opacity 0.35s ease;
      line-height: 1.2;
    }
    .caret {
      display: inline-block;
      margin-left: 4px;
      animation: caret 0.8s steps(1) infinite;
      opacity: 0.9;
    }
    @keyframes caret {
      0%, 50% { opacity: 0; }
      51%, 100% { opacity: 1; }
    }
    @keyframes glow {
      0%, 100% { text-shadow: 0 0 6px #ffd166, 0 0 16px #ff6b6b; opacity: .92; }
      50%     { text-shadow: 0 0 10px #a5ffd6, 0 0 24px #06d6a0; opacity: 1; }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    /* Sembunyikan waktu */
    .time { display: none; }
  </style>
</head>
<body>
  <!-- Ganti src dengan file MP4 kamu (letakkan di folder yang sama) -->
  <video class="bg-video" src="pixel-bg.mp4" autoplay muted loop playsinline></video>
  <div class="overlay"></div>

  <div class="card">
    <h1> </h1>
    <!-- Ganti src di bawah ke file MP3 kamu; disembunyikan, auto play -->
    <audio id="player" src="one-in-a-million-girl.mp3" autoplay playsinline style="display:none"></audio>
    <div class="lyric" id="lyric">mikir kids</div>
    <div class="time" id="time">0:00</div>
  </div>

  <script>
    const cues = [
      // Chorus 1
      { t: 0.0,   line: "There's a million boys around, but I don't see no one but you" },
      { t: 5.0,   line: "Boy, you're so one in a million, you are"},
      { t: 12.0,  line: "Baby, you're the best I ever had" },
      { t: 15.5,  line: "Best I ever had, and I'm certain that" },
      { t: 20.5,  line: "There ain't nothing better" },
      { t: 23.0,  line: "No, there ain't nothing better than this" },
      // Chorus 2 (ulang)
      { t: 26.0,  line: "Boy, you're so one in a million" },
      { t: 30.0,  line: "you are"},
      { t: 32.0,  line: "Baby, you're the best I ever had" },
      { t: 35.5,  line: "Best I ever had, and I'm certain that" },
      { t: 41.0,  line: "There ain't nothing better" },
      { t: 43.0,  line: "No, there ain't nothing better than this" },
    ];
    // Sesuaikan t (detik) agar pas dengan audio yang kamu punya.

    const player = document.getElementById("player");
    const lyricEl = document.getElementById("lyric");
    const timeEl = document.getElementById("time");

    function formatTime(sec) {
      const m = Math.floor(sec / 60);
      const s = Math.floor(sec % 60).toString().padStart(2, "0");
      return `${m}:${s}`;
    }

    let currentLine = "";
    let typingTimer = null;
    let typingDelayTimer = null;

    function typeLine(line, baseSpeed = 70) { // perlambat + variasi
      if (typingTimer) clearTimeout(typingTimer);
      if (typingDelayTimer) clearTimeout(typingDelayTimer);

      lyricEl.style.opacity = 0.25; // fade in start
      lyricEl.innerHTML = '<span id="lineText"></span><span class="caret">|</span>';
      const lineSpan = document.getElementById("lineText");
      const caret = lyricEl.querySelector(".caret");

      const startTyping = () => {
        lyricEl.style.opacity = 1;
        let idx = 0;
        const tick = () => {
          lineSpan.textContent = line.slice(0, idx);
          caret.style.display = "inline-block"; // pastikan nempel
          idx++;
          if (idx > line.length) {
            typingTimer = null;
            return;
          }
          const jitter = Math.floor(Math.random() * 30) - 10; // -10..+19 ms
          const delay = Math.max(30, baseSpeed + jitter);
          typingTimer = setTimeout(tick, delay);
        };
        tick();
      };

      // jeda kecil sebelum mulai mengetik
      typingDelayTimer = setTimeout(startTyping, 220);
    }

    function updateLyric(time) {
      let current = cues[0];
      for (const cue of cues) {
        if (time + 0.05 >= cue.t) current = cue;
        else break;
      }
      if (current.line !== currentLine) {
        currentLine = current.line;
        typeLine(current.line);
      }
    }

    player.addEventListener("timeupdate", () => {
      const t = player.currentTime;
      timeEl.textContent = formatTime(t);
      updateLyric(t);
    });

    player.addEventListener("seeked", () => updateLyric(player.currentTime));
    player.addEventListener("loadedmetadata", () => updateLyric(0));

    // Autoplay attempt (bisa diblokir). Kalau gagal, klik di mana saja di halaman.
    const tryPlay = () => player.play().catch(() => {});
    window.addEventListener("DOMContentLoaded", tryPlay);
    window.addEventListener("click", () => {
      if (player.paused) tryPlay();
    });
  </script>
</body>
</html>
